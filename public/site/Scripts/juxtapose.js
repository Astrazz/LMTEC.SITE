!function(e,c){var a={sliders:[],OPTIMIZATION_ACCEPTED:1,OPTIMIZATION_WAS_CONSTRAINED:2},f=["Large","Medium"];function g(a,b){var c=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){c.loaded=!0,b._onLoaded()},this.image.src=a.src,this.image.alt=a.alt||"",this.label=a.label||!1,this.credit=a.credit||!1}function d(a,c){var b=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){b.loaded=!0,c._onLoaded()},this.flickrID=this.getFlickrID(a.src),this.callFlickrAPI(this.flickrID,b),this.label=a.label||!1,this.credit=a.credit||!1}function h(a){if(a.naturalWidth&&a.naturalHeight)return{width:a.naturalWidth,height:a.naturalHeight};var b=new Image;return b.src=a.src,{width:b.width,height:b.height}}function i(a){return{width:h(a).width,height:h(a).height,aspect:function(){return this.width/this.height}}}function j(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function k(a,b){a.className=a.className.replace(/(\S+)\s*/g,function(a,c){return c===b?"":a}).replace(/^\s+/,"")}function l(a){return c.getComputedStyle?{width:parseInt(getComputedStyle(a).width,10),height:parseInt(getComputedStyle(a).height,10)}:(w=a.getBoundingClientRect().right-a.getBoundingClientRect().left,h=a.getBoundingClientRect().bottom-a.getBoundingClientRect().top,{width:parseInt(w,10)||0,height:parseInt(h,10)||0})}function m(a){return!!a.match(/flic.kr\/.+/i)|| -1!=a.indexOf("flickr.com/photos/")}d.prototype={getFlickrID:function(b){if(b.match(/flic.kr\/.+/i))return function f(a){var b="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",e=b.length;if("string"!=typeof a)throw'"base58Decode" only accepts strings.';for(var c=0;a;){var d=b.indexOf(a[0]);if(d<0)throw'"base58Decode" can\'t find "'+a[0]+'" in the alphabet: "'+b+'"';c+=d*Math.pow(e,a.length-1),a=a.substring(1)}return c.toString()}(b.split("/").slice(-1)[0]);var c=b.indexOf("flickr.com/photos/")+18,a=b.substr(c);return -1==a.indexOf("/")?null:(0===a.indexOf("/")&&(a=a.substr(1)),id=a.split("/")[1])},callFlickrAPI:function(b,c){var a=new XMLHttpRequest;a.open("GET","https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=d90fc2d1f4acc584e08b8eaea5bf4d6c&photo_id="+b+"&format=json&nojsoncallback=1",!0),a.onload=function(){if(a.status>=200&&a.status<400){data=JSON.parse(a.responseText);var b=c.bestFlickrUrl(data.sizes.size);c.setFlickrImage(b)}else console.error("There was an error getting the picture from Flickr")},a.onerror=function(){console.error("There was an error getting the picture from Flickr")},a.send()},setFlickrImage:function(a){this.image.src=a},bestFlickrUrl:function(a){for(var d={},b=0;b<a.length;b++)d[a[b].label]=a[b].source;for(var c=0;c<f.length;c++)if(f[c]in d)return d[f[c]];return a[0].source}};var n={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0};function o(a){return"string"!=typeof a?Boolean(a):!("false"===a||""===a)}function b(e,a,c){var b;for(b in this.selector=e,this.options={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0,startingPosition:"50%",mode:"horizontal",callback:null},this.options)b in c&&(b in n?this.options[b]=o(c[b]):this.options[b]=c[b]);2==a.length?(m(a[0].src)?this.imgBefore=new d(a[0],this):this.imgBefore=new g(a[0],this),m(a[1].src)?this.imgAfter=new d(a[1],this):this.imgAfter=new g(a[1],this)):console.warn("The images parameter takes two Image objects."),this.imgBefore.credit||this.imgAfter.credit?this.options.showCredits=!0:this.options.showCredits=!1}b.prototype={updateSlider:function(c,d){var a,b;b=100-(leftPercentNum=parseFloat(a=(a="vertical"===this.options.mode?function(c,b){if("string"==typeof b||"number"==typeof b)topPercent=parseInt(b,10);else{var a,d=c.getBoundingClientRect(),f={top:d.top+e.body.scrollTop+e.documentElement.scrollTop,left:d.left+e.body.scrollLeft+e.documentElement.scrollLeft},g=c.offsetHeight;topPercent=(((a=b).pageY?a.pageY:a.touches?a.touches[0].pageY:a.clientY+e.body.scrollTop+e.documentElement.scrollTop)-f.top)/g*100}return topPercent}(this.slider,c):function(c,b){if("string"==typeof b||"number"==typeof b)leftPercent=parseInt(b,10);else{var a,d=c.getBoundingClientRect(),f={top:d.top+e.body.scrollTop+e.documentElement.scrollTop,left:d.left+e.body.scrollLeft+e.documentElement.scrollLeft},g=c.offsetWidth;leftPercent=(((a=b).pageX?a.pageX:a.touches?a.touches[0].pageX:a.clientX+e.body.scrollLeft+e.documentElement.scrollLeft)-f.left)/g*100}return leftPercent}(this.slider,c)).toFixed(2)+"%"))+"%",leftPercentNum>0&&leftPercentNum<100&&(k(this.handle,"transition"),k(this.rightImage,"transition"),k(this.leftImage,"transition"),this.options.animate&&d&&(j(this.handle,"transition"),j(this.leftImage,"transition"),j(this.rightImage,"transition")),"vertical"===this.options.mode?(this.handle.style.top=a,this.leftImage.style.height=a,this.rightImage.style.height=b):(this.handle.style.left=a,this.leftImage.style.width=a,this.rightImage.style.width=b),this.sliderPosition=a)},getPosition:function(){return this.sliderPosition},displayLabel:function(c,d){var a,b;(label=e.createElement("div")).className="jx-label",label.setAttribute("tabindex",0),a=label,b=d,e.body.textContent?a.textContent=b:a.innerText=b,c.appendChild(label)},displayCredits:function(){(credit=e.createElement("div")).className="jx-credit",text="<em>Photo Credits:</em>",this.imgBefore.credit&&(text+=" <em>Before</em> "+this.imgBefore.credit),this.imgAfter.credit&&(text+=" <em>After</em> "+this.imgAfter.credit),credit.innerHTML=text,this.wrapper.appendChild(credit)},setStartingPosition:function(a){this.options.startingPosition=a},checkImages:function(){return i(this.imgBefore.image).aspect()==i(this.imgAfter.image).aspect()},calculateDims:function(a,b){var c=i(this.imgBefore.image).aspect();return a?b=a/c:b&&(a=b*c),{width:a,height:b,ratio:c}},responsivizeIframe:function(a){return a.height<c.innerHeight?a.ratio>=1&&(this.wrapper.style.paddingTop=parseInt((c.innerHeight-a.height)/2)+"px"):a.height>c.innerHeight&&(a=this.calculateDims(0,c.innerHeight),this.wrapper.style.paddingLeft=parseInt((c.innerWidth-a.width)/2)+"px"),this.options.showCredits&&(a.height-=13),a},setWrapperDimensions:function(){var b=l(this.wrapper).width,d=l(this.wrapper).height,a=this.calculateDims(b,d);c.location===c.parent.location||this.options.makeResponsive||(a=this.responsivizeIframe(a)),this.wrapper.style.height=parseInt(a.height)+"px",this.wrapper.style.width=parseInt(a.width)+"px"},optimizeWrapper:function(b){var c=a.OPTIMIZATION_ACCEPTED;return this.imgBefore.image.naturalWidth>=b&&this.imgAfter.image.naturalWidth>=b?(this.wrapper.style.width=b+"px",c=a.OPTIMIZATION_WAS_CONSTRAINED):this.imgAfter.image.naturalWidth<b?this.wrapper.style.width=this.imgAfter.image.naturalWidth+"px":this.wrapper.style.width=this.imgBefore.image.naturalWidth+"px",this.setWrapperDimensions(),c},_onLoaded:function(){this.imgBefore&& !0===this.imgBefore.loaded&&this.imgAfter&& !0===this.imgAfter.loaded&&(this.wrapper=e.querySelector(this.selector),j(this.wrapper,"juxtapose"),this.wrapper.style.width=h(this.imgBefore.image).width,this.setWrapperDimensions(),this.slider=e.createElement("div"),this.slider.className="jx-slider",this.wrapper.appendChild(this.slider),"horizontal"!=this.options.mode&&j(this.slider,this.options.mode),this.handle=e.createElement("div"),this.handle.className="jx-handle",this.rightImage=e.createElement("div"),this.rightImage.className="jx-image jx-right",this.rightImage.appendChild(this.imgAfter.image),this.leftImage=e.createElement("div"),this.leftImage.className="jx-image jx-left",this.leftImage.appendChild(this.imgBefore.image),this.slider.appendChild(this.handle),this.slider.appendChild(this.leftImage),this.slider.appendChild(this.rightImage),this.leftArrow=e.createElement("div"),this.rightArrow=e.createElement("div"),this.control=e.createElement("div"),this.controller=e.createElement("div"),this.leftArrow.className="jx-arrow jx-left",this.rightArrow.className="jx-arrow jx-right",this.control.className="jx-control",this.controller.className="jx-controller",this.controller.setAttribute("tabindex",0),this.controller.setAttribute("role","slider"),this.controller.setAttribute("aria-valuenow",50),this.controller.setAttribute("aria-valuemin",0),this.controller.setAttribute("aria-valuemax",100),this.controller.setAttribute("aria-label","Toggle"),this.handle.appendChild(this.leftArrow),this.handle.appendChild(this.control),this.handle.appendChild(this.rightArrow),this.control.appendChild(this.controller),this._init())},_init:function(){!1===this.checkImages()&&console.warn(this,"Check that the two images have the same aspect ratio for the slider to work correctly."),this.updateSlider(this.options.startingPosition,!1),!0===this.options.showLabels&&(this.imgBefore.label&&this.displayLabel(this.leftImage,this.imgBefore.label),this.imgAfter.label&&this.displayLabel(this.rightImage,this.imgAfter.label)),!0===this.options.showCredits&&this.displayCredits();var b=this;c.addEventListener("resize",function(){b.setWrapperDimensions()}),this.slider.addEventListener("mousedown",function(a){(a=a||c.event).preventDefault(),b.updateSlider(a,!0),animate=!0,this.addEventListener("mousemove",function(a){(a=a||c.event).preventDefault(),animate&&b.updateSlider(a,!1)}),this.addEventListener("mouseup",function(a){(a=a||c.event).preventDefault(),a.stopPropagation(),this.removeEventListener("mouseup",arguments.callee),animate=!1})}),this.slider.addEventListener("touchstart",function(a){(a=a||c.event).preventDefault(),a.stopPropagation(),b.updateSlider(a,!0),this.addEventListener("touchmove",function(a){(a=a||c.event).preventDefault(),a.stopPropagation(),b.updateSlider(event,!1)})}),this.handle.addEventListener("keydown",function(d){var e=(d=d||c.event).which||d.keyCode,a=parseFloat(this.style.left);if(37==e){a-=1;var f=parseFloat(this.style.left)-1;b.updateSlider(f,!1),b.controller.setAttribute("aria-valuenow",a)}if(39==e){a+=1;var g=parseFloat(this.style.left)+1;b.updateSlider(g,!1),b.controller.setAttribute("aria-valuenow",a)}}),this.leftImage.addEventListener("keydown",function(a){var c=a.which||a.keyCode;(13==c||32==c)&&(b.updateSlider("90%",!0),b.controller.setAttribute("aria-valuenow",90))}),this.rightImage.addEventListener("keydown",function(a){var c=a.which||a.keyCode;(13==c||32==c)&&(b.updateSlider("10%",!0),b.controller.setAttribute("aria-valuenow",10))}),a.sliders.push(this),this.options.callback&&"function"==typeof this.options.callback&&this.options.callback(this)}},a.makeSlider=function(f,e){void 0===e&&(e=a.sliders.length);var b=f,c=b.querySelectorAll("img"),d={};b.getAttribute("data-animate")&&(d.animate=b.getAttribute("data-animate")),b.getAttribute("data-showlabels")&&(d.showLabels=b.getAttribute("data-showlabels")),b.getAttribute("data-showcredits")&&(d.showCredits=b.getAttribute("data-showcredits")),b.getAttribute("data-startingposition")&&(d.startingPosition=b.getAttribute("data-startingposition")),b.getAttribute("data-mode")&&(d.mode=b.getAttribute("data-mode")),b.getAttribute("data-makeresponsive")&&(d.mode=b.getAttribute("data-makeresponsive")),j(f,specificClass="juxtapose-"+e),selector="."+specificClass,b.innerHTML?b.innerHTML="":b.innerText="",slider=new a.JXSlider(selector,[{src:c[0].src,label:c[0].getAttribute("data-label"),credit:c[0].getAttribute("data-credit"),alt:c[0].alt},{src:c[1].src,label:c[1].getAttribute("data-label"),credit:c[1].getAttribute("data-credit"),alt:c[1].alt}],d)},a.scanPage=function(){for(var c=e.querySelectorAll(".juxtapose"),b=0;b<c.length;b++)a.makeSlider(c[b],b)},a.JXSlider=b,c.juxtapose=a,a.scanPage()}(document,window),window.addEventListener||function(a,b,c,d,e,f,g){a[d]=b[d]=c[d]=function(a,b){var c=this;g.unshift([c,a,b,function(a){a.currentTarget=c,a.preventDefault=function(){a.returnValue=!1},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,b.call(c,a)}]),this.attachEvent("on"+a,g[0][3])},a[e]=b[e]=c[e]=function(c,d){for(var a,b=0;a=g[b];++b)if(a[0]==this&&a[1]==c&&a[2]==d)return this.detachEvent("on"+c,g.splice(b,1)[0][3])},a[f]=b[f]=c[f]=function(a){return this.fireEvent("on"+a.type,a)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])